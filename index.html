<html>
<boy>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Live Barcode Stock Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 30px;
    }
    .form-box {
      max-width: 400px;
      background: #f0f0f0;
      padding: 20px;
      border-radius: 10px;
    }
    select, input {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
    }
    .stock-info {
      margin-top: 15px;
      font-weight: bold;
    }
  </style>
</head>
<body>

<div class="form-box">
  <h3>Select Barcode</h3>
  <select id="barcodeSelect" onchange="showStock()">
    <option value="">-- Select Barcode --</option>
    <!-- Options will be filled by JS -->
  </select>
  <div class="stock-info" id="stockDisplay">Stock: --</div>
</div>

<script>
  let stockData = {};

  // Fetch stock.csv and parse
  fetch('stock.csv')
    .then(response => response.text())
    .then(data => {
      const lines = data.trim().split('\n').slice(1); // skip header
      const select = document.getElementById("barcodeSelect");

      lines.forEach(line => {
        const [barcode, stock] = line.split(',');
        stockData[barcode] = stock;

        const option = document.createElement("option");
        option.value = barcode;
        option.textContent = `${barcode}`;
        select.appendChild(option);
      });
    });

  function showStock() {
    const barcode = document.getElementById("barcodeSelect").value;
    const stock = stockData[barcode] ?? "--";
    document.getElementById("stockDisplay").textContent = `Stock: ${stock}`;
  }
</script>

</body>
</html>

<body/>
<html/>
